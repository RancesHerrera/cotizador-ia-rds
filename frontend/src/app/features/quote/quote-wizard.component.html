<div class="max-w-[85%] w-full mx-auto p-4 md:p-6 transition-all duration-300">
    <!-- Stepper Header -->
    <div class="mb-8">
        <div class="flex items-center justify-between relative">
            <div class="absolute w-full top-1/2 transform -translate-y-1/2 left-0 z-0 border-t-2 border-gray-200"></div>

            <!-- Step 1 -->
            <div class="relative z-10 flex flex-col items-center cursor-pointer" (click)="goToStep(1)">
                <div [class]="currentStep >= 1 ? 'bg-blue-600 text-white' : 'bg-gray-200 text-gray-500'"
                    class="w-10 h-10 rounded-full flex items-center justify-center font-bold transition-colors duration-200">
                    1</div>
                <span class="mt-2 text-sm font-medium" [class.text-blue-600]="currentStep >= 1">Datos</span>
            </div>

            <!-- Step 2 -->
            <div class="relative z-10 flex flex-col items-center">
                <div [class]="currentStep >= 2 ? 'bg-blue-600 text-white' : 'bg-gray-200 text-gray-500'"
                    class="w-10 h-10 rounded-full flex items-center justify-center font-bold transition-colors duration-200">
                    2</div>
                <span class="mt-2 text-sm font-medium" [class.text-blue-600]="currentStep >= 2">Alcance</span>
            </div>

            <!-- Step 3 -->
            <div class="relative z-10 flex flex-col items-center">
                <div [class]="currentStep >= 3 ? 'bg-blue-600 text-white' : 'bg-gray-200 text-gray-500'"
                    class="w-10 h-10 rounded-full flex items-center justify-center font-bold transition-colors duration-200">
                    3</div>
                <span class="mt-2 text-sm font-medium" [class.text-blue-600]="currentStep >= 3">Resumen</span>
            </div>
        </div>
    </div>

    <!-- Content -->
    <div class="bg-white rounded-lg shadow p-6 min-h-[400px]">
        <app-step-project *ngIf="currentStep === 1" [initialData]="projectData"
            [initialSelectedRoleIds]="selectedRoleIds" [projectId]="projectId" [quoteId]="quoteId"
            (projectCreated)="onProjectCreated($event)">
        </app-step-project>

        <app-step-scope *ngIf="currentStep === 2" [quoteId]="quoteId" [selectedRoleIds]="selectedRoleIds"
            [initialRequirements]="requirementsText" (requirementsChange)="onRequirementsChanged($event)"
            (back)="prevStep()" (next)="nextStep()">
        </app-step-scope>

        <app-step-summary *ngIf="currentStep === 3" [quoteId]="quoteId" (back)="prevStep()">
        </app-step-summary>
    </div>
</div>